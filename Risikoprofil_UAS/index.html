<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAS Risikoprofil</title>
    <link rel="icon" href="smallLogo.png" type="image/png">
    <link rel="stylesheet" href="css/stil.css">
</head>
<body>
    <div class="header">
        <h1>UAS risikoprofil kalkulator</h1>
        <div class="header-info">
            <div class="info-field">
                <label for="operator-navn">Operatør:</label>
                <input type="text" id="operator-navn" list="operator-suggestions" placeholder="Skriv inn operatørnavn">
                <datalist id="operator-suggestions"></datalist>
            </div>
            <div class="info-field">
                <label for="filled-by">Fylt ut av:</label>
                <input type="text" id="filled-by" placeholder="Skriv inn navn">
            </div>
            <div class="info-field">
                <label for="date">Dato:</label>
                <input type="date" id="date">
            </div>
        </div>
    </div>

    <div class="total-summary" id="total-summary-block">
        <div class="total-number" id="grand-total-text">Totalsum: <span id="grand-total-display">0</span> / <span id="grand-max-total-display">89</span></div>
        
        <div class="all-gauges-container">
            <div class="gauge-block" id="gauge-block-doc">
                <div class="gauge-block-title">Dokumentasjon</div>
                <div class="gauge-block-summary"><span id="doc-sum">0</span> / <span id="doc-max-sum">53</span></div>
                <div class="gauge">
                    <div class="gauge-bg">
                           <div class="gauge-cover"></div>
                    </div>
                    <div class="gauge-needle" id="doc-needle"></div>
                    <div class="gauge-value-overlay" id="doc-gauge-value">0</div>
                </div>
            </div>
            <div class="gauge-block" id="gauge-block-total">
                <div class="gauge-block-title">Total Risikoscore</div>
                   <div class="gauge-block-summary"><span id="total-gauge-sum-text">0</span> / <span id="total-gauge-max-text">89</span></div>
                <div class="gauge">
                    <div class="gauge-bg">
                        <div class="gauge-cover"></div>
                    </div>
                    <div class="gauge-needle" id="total-needle"></div>
                    <div class="gauge-value-overlay" id="total-gauge-value">0</div>
                </div>
            </div>
            <div class="gauge-block" id="gauge-block-ytelse">
                <div class="gauge-block-title">Ytelse</div>
                <div class="gauge-block-summary"><span id="ytelse-sum">0</span> / <span id="ytelse-max-sum">36</span></div>
                <div class="gauge">
                    <div class="gauge-bg">
                           <div class="gauge-cover"></div>
                    </div>
                    <div class="gauge-needle" id="ytelse-needle"></div>
                    <div class="gauge-value-overlay" id="ytelse-gauge-value">0</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container" id="main-container">
        <div class="section" id="section-doc">
            <div class="section-header">
                <span>Dokumentasjon</span>
                <div class="not-assessed-checkbox">
                    <input type="checkbox" id="doc-not-assessed" onchange="toggleNotAssessed('doc')">
                    <label for="doc-not-assessed">Ikke vurdert</label>
                </div>
            </div>
            
            <div class="section-content" id="doc-content">
                <div class="subsection-header">Operasjoner</div>
                <div class="header-row">
                    <div class="header-cell">Kriterie</div>
                    <div class="header-cell">Valg</div>
                    <div class="header-cell">Beregnet verdi</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Fartøyvekt</div>
                    <div class="form-cell">
                        <select id="fartoyvekt" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Under 4 kg">Under 4 kg</option>
                            <option value="4 - 25 kg">4 - 25 kg</option>
                            <option value="Over 25 kg">Over 25 kg</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="fartoyvekt-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Synsvidde</div>
                    <div class="form-cell">
                        <select id="synsvidde" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="VLOS">VLOS</option>
                            <option value="BVLOS med observatør">BVLOS med observatør</option>
                            <option value="BVLOS uten observatør">BVLOS uten observatør</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="synsvidde-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">C2 link</div>
                    <div class="form-cell">
                        <select id="c2link" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Direkte">Direkte</option>
                            <option value="GSM/SATCOM">GSM/SATCOM</option>
                            <option value="Ingen (automasjon/autonomi)">Ingen (automasjon/autonomi)</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="c2link-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Flyhøyde</div>
                    <div class="form-cell">
                        <select id="flyhoyde" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Under 400'">Under 400'</option>
                            <option value="Over 400'">Over 400'</option>
                            <option value="I fareområde">I fareområde</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="flyhoyde-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Operasjonsmiljø</div>
                    <div class="form-cell">
                        <select id="operasjonsmiljo" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Spredtbefolket">Spredtbefolket</option>
                            <option value="Befolket">Befolket</option>
                            <option value="Flyplass">Flyplass</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="operasjonsmiljo-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Redusert GRC</div>
                    <div class="form-cell">
                        <select id="redusert-grc" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="-1 eller -2">-1 eller -2</option>
                            <option value="-3 eller mer">-3 eller mer</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="redusert-grc-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Område</div>
                    <div class="form-cell">
                        <select id="omrade" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Presist">Presist</option>
                            <option value="Generisk">Generisk</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="omrade-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">SAIL</div>
                    <div class="form-cell">
                        <select id="sail" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="I - II">I - II</option>
                            <option value="III - IV">III - IV</option>
                            <option value="V - VI">V - VI</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="sail-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">
                        Annen økt risiko
                        <span class="tooltip-container">
                            <span class="tooltip-icon">?</span>
                            <span class="tooltip-text">For eksempel frakt av farlig gods, komplekst dronesystem eller svermoperasjoner</span>
                        </span>
                    </div>
                    <div class="form-cell">
                        <select id="annen-risiko" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Noe">Noe</option>
                            <option value="Betydelig">Betydelig</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="annen-risiko-value">0</div>
                </div>
                
                <div style="margin-top: 20px;"></div>
                
                <div class="subsection-header">Organisasjon</div>
                <div class="header-row">
                    <div class="header-cell">Kriterie</div>
                    <div class="header-cell">Valg</div>
                    <div class="header-cell">Beregnet verdi</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Antall baser</div>
                    <div class="form-cell">
                        <select id="antall-baser" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="ingen">ingen</option>
                            <option value="3 eller mindre">3 eller mindre</option>
                            <option value="4 eller mer">4 eller mer</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="antall-baser-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Antall piloter</div>
                    <div class="form-cell">
                        <select id="antall-piloter" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="10 eller mindre">10 eller mindre</option>
                            <option value="10 - 20">10 - 20</option>
                            <option value="20 eller flere">20 eller flere</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="antall-piloter-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Ansvarsfordeling</div>
                    <div class="form-cell">
                        <select id="ansvarsfordeling" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="ok">ok</option>
                            <option value="Flere roller på én person">Flere roller på én person</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="ansvarsfordeling-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Krav til eksamen</div>
                    <div class="form-cell">
                        <select id="krav-eksamen" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Ja, A1/A3/A2">Ja, A1/A3/A2</option>
                            <option value="Ja, STS">Ja, STS</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="krav-eksamen-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Kjøpt OM?</div>
                    <div class="form-cell">
                        <select id="kjopt-om" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Ja">Ja</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="kjopt-om-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">SMS</div>
                    <div class="form-cell">
                        <select id="sms-org" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Til stede">Til stede</option>
                            <option value="N/A">N/A</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="sms-org-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Eksternt vedlikehold</div>
                    <div class="form-cell">
                        <select id="eksternt-vedlikehold" data-sectiongroup="doc" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Ja">Ja</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="eksternt-vedlikehold-value">0</div>
                </div>
            </div>
        </div>

        <div class="section ytelse-section" id="section-ytelse">
            <div class="section-header">
                <span>Ytelse</span>
                <div class="not-assessed-checkbox">
                    <input type="checkbox" id="ytelse-not-assessed" onchange="toggleNotAssessed('ytelse')">
                    <label for="ytelse-not-assessed">Ikke vurdert</label>
                </div>
            </div>
            
            <div class="section-content" id="ytelse-content">
                <div class="subsection-header">Innrapportering</div>
                <div class="header-row">
                    <div class="header-cell">Kriterie</div>
                    <div class="header-cell">Valg</div>
                    <div class="header-cell">Beregnet verdi</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Flytimer i året</div>
                    <div class="form-cell">
                        <select id="flytimer" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Under 100">Under 100</option>
                            <option value="Over 100">Over 100</option>
                            <option value="Over 1 000">Over 1 000</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="flytimer-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Bekymringsmeldinger</div>
                    <div class="form-cell">
                        <select id="bekymringsmeldinger" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Ingen">Ingen</option>
                            <option value="Noe">Noe</option>
                            <option value="Middels">Middels</option>
                            <option value="Alvorlig">Alvorlig</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="bekymringsmeldinger-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Veiledningsbehov</div>
                    <div class="form-cell">
                        <select id="veiledningsbehov" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Lite">Lite</option>
                            <option value="Middels">Middels</option>
                            <option value="Stort">Stort</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="veiledningsbehov-value">0</div>
                </div>
                
                <div style="margin-top: 20px;"></div>

                <div class="subsection-header">Sist tilsyn</div>
                <div class="header-row">
                    <div class="header-cell">Kriterie</div>
                    <div class="header-cell">Valg</div>
                    <div class="header-cell">Beregnet verdi</div>
                </div>
                
                <div class="form-row">
                    <div class="form-cell">Direkte nivå 1 avvik</div>
                    <div class="form-cell">
                        <select id="niva1-avvik" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Ja">Ja</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="niva1-avvik-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Antall nivå 2 avvik</div>
                    <div class="form-cell">
                        <select id="niva2-avvik" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="0 - 3">0 - 3</option>
                            <option value="4 - 7">4 - 7</option>
                            <option value="Over 7">Over 7</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="niva2-avvik-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Frist for lukking</div>
                    <div class="form-cell">
                        <select id="frist-lukking" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Overholdt">Overholdt</option>
                            <option value="Overskredet">Overskredet</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="frist-lukking-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">SMS</div>
                    <div class="form-cell">
                        <select id="sms-tilsyn" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Fungerer">Fungerer</option>
                            <option value="N/A">N/A</option>
                            <option value="Til stede">Til stede</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="sms-tilsyn-value">0</div>
                </div>
                
                <div style="margin-top: 20px;"></div>

                <div class="subsection-header">LT saksbehandling</div>
                <div class="header-row">
                    <div class="header-cell">Kriterie</div>
                    <div class="header-cell">Valg</div>
                    <div class="header-cell">Beregnet verdi</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Tid siden siste kontakt/revisjon</div>
                    <div class="form-cell">
                        <select id="siste-kontakt" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Under 12 månder">Under 12 månder</option>
                            <option value="Mer enn 12 måneder">Mer enn 12 måneder</option>
                            <option value="Mer enn 18 måneder">Mer enn 18 måneder</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="siste-kontakt-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Manglende data i EMPIC</div>
                    <div class="form-cell">
                        <select id="empic-data" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Ja">Ja</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="empic-data-value">0</div>
                </div>
                <div class="form-row">
                    <div class="form-cell">Mangler i OAT</div>
                    <div class="form-cell">
                        <select id="oat-mangler" data-sectiongroup="ytelse" onchange="updateCalculations()">
                            <option value="">Velg...</option>
                            <option value="Nei">Nei</option>
                            <option value="Ja">Ja</option>
                        </select>
                    </div>
                    <div class="form-cell calculated-value" id="oat-mangler-value">0</div>
                </div>
            </div>
        </div>
    </div>

    <div class="comments-section">
        <label for="comments">Kommentarer:</label>
        <textarea id="comments" placeholder="Legg til eventuelle kommentarer her..." rows="4"></textarea>
    </div>

    <div class="action-buttons">
            <button id="download-csv-button">
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF">
                    <path d="M0 0h24v24H0V0z" fill="none"/>
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
                Last ned som CSV
            </button>
            <button id="print-pdf-button">Skriv ut til PDF</button>
            <button id="clear-form-button">Tøm skjema</button>
            <button id="load-csv-button" class="load-button">
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF">
                    <path d="M0 0h24v24H0V0z" fill="none"/>
                    <path d="M9 16h6V8h4L12 3 5 8h4zm-4 5h14v2H5z"/>
                </svg>
                Last inn CSV
            </button>
            <input type="file" id="csv-file-input" accept=".csv" style="display: none;">
    </div>
    <div class="footer-links">
        <a href="https://caano.sharepoint.com/:f:/r/teams/FUL2/Delte%20dokumenter/Godkjenning%20og%20tilsyn/Risikoprofiler/CSV%20Innboks%20for%20Risikoprofiler?csf=1&web=1&e=PIE0pJ" target="_blank">CSV Mappe for opplasting</a>
        <a href="https://caano.sharepoint.com/:l:/r/teams/FUL2/Lists/Risikoprofiler_Masterdata?e=OzAbsm" target="_blank">Profiler oversikt</a>
    </div>
    <script src="js/kalkulator.js"></script>
</body>
</html>